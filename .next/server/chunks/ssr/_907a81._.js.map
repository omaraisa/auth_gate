{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Dev/Applications/auth_gate/app/components/login.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const LoginForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call LoginForm() from the server but LoginForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/login.tsx <module evaluation>\",\n    \"LoginForm\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,0DACA"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Dev/Applications/auth_gate/app/components/login.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const LoginForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call LoginForm() from the server but LoginForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/login.tsx\",\n    \"LoginForm\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,sCACA"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Dev/Applications/auth_gate/app/page.tsx"],"sourcesContent":["import {LoginForm} from \"./components/login\";\n\nexport default function Home() {\n  return (\n    <LoginForm />\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBACE,8OAAC,2HAAA,CAAA,YAAS;;;;;AAEd"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Dev/Applications/auth_gate/app/lib/authenticateArcGIS.ts/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const authenticateArcGIS = registerClientReference(\n    function() { throw new Error(\"Attempted to call authenticateArcGIS() from the server but authenticateArcGIS is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/lib/authenticateArcGIS.ts <module evaluation>\",\n    \"authenticateArcGIS\",\n);\nexport const checkArcGISSession = registerClientReference(\n    function() { throw new Error(\"Attempted to call checkArcGISSession() from the server but checkArcGISSession is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/lib/authenticateArcGIS.ts <module evaluation>\",\n    \"checkArcGISSession\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,+DACA;AAEG,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,+DACA"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Dev/Applications/auth_gate/app/lib/authenticateArcGIS.ts/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const authenticateArcGIS = registerClientReference(\n    function() { throw new Error(\"Attempted to call authenticateArcGIS() from the server but authenticateArcGIS is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/lib/authenticateArcGIS.ts\",\n    \"authenticateArcGIS\",\n);\nexport const checkArcGISSession = registerClientReference(\n    function() { throw new Error(\"Attempted to call checkArcGISSession() from the server but checkArcGISSession is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/lib/authenticateArcGIS.ts\",\n    \"checkArcGISSession\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,2CACA;AAEG,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,2CACA"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Dev/Applications/auth_gate/app/hooks/actions.tsx"],"sourcesContent":["// app/hooks/actions.ts\r\n'use server';\r\n\r\nimport { z } from 'zod';\r\nimport { redirect } from 'next/navigation';\r\nimport { cookies } from 'next/headers';\r\nimport { authenticateArcGIS } from '../lib/authenticateArcGIS';\r\n\r\nconst loginSchema = z.object({\r\n  username: z.string().min(3, { message: 'Invalid username' }).trim(),\r\n  password: z.string().min(4, { message: 'Password must be at least 4 characters' }).trim(),\r\n});\r\n\r\nexport async function login(prevState: any, formData: FormData) {\r\n  const result = loginSchema.safeParse(Object.fromEntries(formData));\r\n\r\n  if (!result.success) {\r\n    return {\r\n      errors: result.error.flatten().fieldErrors,\r\n    };\r\n  }\r\n\r\n  const { username, password } = result.data;\r\n\r\n  const authResult = await authenticateArcGIS(username, password);\r\n\r\n  if (authResult) {\r\n    // Set HttpOnly cookie with the token\r\n    const { token, expires } = authResult;\r\n\r\n    const cookieStore = await cookies();\r\n\r\n    cookieStore.set({\r\n      name: 'arcgis_token',\r\n      value: token,\r\n      httpOnly: true,\r\n      secure: true,\r\n      sameSite: 'lax', // or 'none' for cross-domain if needed\r\n      path: '/',\r\n      expires: new Date(expires),\r\n    });\r\n\r\n    // Optional: save user info or other metadata\r\n    cookieStore.set({\r\n      name: 'arcgis_user',\r\n      value: username,\r\n      httpOnly: false, // can be read on client if needed\r\n      secure: true,\r\n      sameSite: 'lax',\r\n      path: '/',\r\n      expires: new Date(expires),\r\n    });\r\n    console.log('User logged in successfully:', token);\r\n    // redirect('http://localhost:3000');\r\n  }\r\n\r\n  return {\r\n    errors: {\r\n      username: ['Invalid username or password'],\r\n    },\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;AAKvB;AACA;;AAHA;;;;;;AAKA,MAAM,cAAc,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC3B,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAmB,GAAG,IAAI;IACjE,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAyC,GAAG,IAAI;AACzF;AAEO,eAAe,uCAAG,GAAH,MAAM,SAAc,EAAE,QAAkB;IAC5D,MAAM,SAAS,YAAY,SAAS,CAAC,OAAO,WAAW,CAAC;IAExD,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO;YACL,QAAQ,OAAO,KAAK,CAAC,OAAO,GAAG,WAAW;QAC5C;IACF;IAEA,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,OAAO,IAAI;IAE1C,MAAM,aAAa,MAAM,CAAA,GAAA,gIAAA,CAAA,qBAAkB,AAAD,EAAE,UAAU;IAEtD,IAAI,YAAY;QACd,qCAAqC;QACrC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;QAE3B,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;QAEhC,YAAY,GAAG,CAAC;YACd,MAAM;YACN,OAAO;YACP,UAAU;YACV,QAAQ;YACR,UAAU;YACV,MAAM;YACN,SAAS,IAAI,KAAK;QACpB;QAEA,6CAA6C;QAC7C,YAAY,GAAG,CAAC;YACd,MAAM;YACN,OAAO;YACP,UAAU;YACV,QAAQ;YACR,UAAU;YACV,MAAM;YACN,SAAS,IAAI,KAAK;QACpB;QACA,QAAQ,GAAG,CAAC,gCAAgC;IAC5C,qCAAqC;IACvC;IAEA,OAAO;QACL,QAAQ;YACN,UAAU;gBAAC;aAA+B;QAC5C;IACF;AACF;;;IAhDsB;;AAAA,+OAAA"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}